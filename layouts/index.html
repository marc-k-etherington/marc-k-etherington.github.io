{{ define "main" }}

{{ partial "hero-banner.html" . }}

<!-- News Section -->
<h2>News</h2>
{{ $paginator := .Paginate (where site.RegularPages "Type" "in" site.Params.mainSections) }}
{{ range $paginator.Pages.ByPublishDate.Reverse }}
  <div class="news-item">
    <div class="news-content">
      {{ $content := .Content }}
      {{ $imageRegex := `<img[^>]+src="([^"]+)"` }}
      {{ if findRE $imageRegex $content 1 }}
        {{ $imgTag := index (findRE $imageRegex $content 1) 0 }}
        {{ $imgSrc := replaceRE `<img[^>]+src="([^"]+)".*` "$1" $imgTag }}
        <div class="news-thumbnail-wrapper">
          <img src="{{ $imgSrc }}" alt="{{ .Title }}" class="news-thumbnail" loading="lazy">
        </div>
      {{ end }}
      
      <div class="news-text">
        <h2 class="post-list {{ if ne .Params.show_summary false }}summary{{ end }}">
          <a href="{{ .RelPermalink }}">
            {{ .Title }}
          </a>
        </h2>
        {{ $dateFormat := $.Site.Params.dateFormat | default "Jan 2, 2006" }}
        <strong>Publish date: </strong>{{ .PublishDate.Format $dateFormat }}
        <br>
        <br>
        {{ if ne .Params.show_summary false }}
          {{ .Summary }}
        {{ end }}
      </div>
    </div>
  </div>
{{ end }}
{{ template "partials/pagination.html" . }}

/* ===== PAGINATION BUTTONS ===== */
.pagination {
  display: flex;
  justify-content: center;
  gap: var(--spacing-xs);
  margin: var(--spacing-lg) 0;
  flex-wrap: wrap;
}

.pagination a,
.pagination span {
  background: var(--color-white);
  border: var(--border-thin);
  box-shadow: var(--shadow-paper);
  padding: var(--spacing-xs) var(--spacing-sm);
  text-decoration: none;
  color: var(--color-black);
  font-weight: bold;
  display: inline-block;
  transition: all var(--transition-fast);
}

.pagination a:hover {
  box-shadow: var(--shadow-paper-hover);
  transform: translate(-1px, -1px);
}

.pagination .active,
.pagination span.active {
  background: var(--color-teal);
  color: var(--color-white);
  border-color: var(--color-teal);
}

.pagination .disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

<!-- Back to Top Button -->
<button class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â†‘ Top</button>

<!-- Floating Social Media -->
<div class="social-float-compact">
  <a href="https://www.linkedin.com/in/marc-kenneth-etherington-32aa5876/?skipRedirect=true" target="_blank" rel="noopener" title="LinkedIn">
    <img src="/images/LinkedIn.jpg" alt="LinkedIn" class="social-icon">
  </a>
  <a href="https://bsky.app/profile/mketherington.bsky.social" target="_blank" rel="noopener" title="Bluesky">
    <img src="/images/BlueSky_Logo.png" alt="Bluesky" class="social-icon">
  </a>
  <a href="https://www.researchgate.net/profile/Marc-Etherington?ev=hdr_xprf" target="_blank" rel="noopener" title="ResearchGate">
    <img src="/images/Researchgate.png" alt="ResearchGate" class="social-icon">
  </a>
  <a href="https://scholar.google.co.uk/citations?user=3dgABIQAAAAJ&hl=en" target="_blank" rel="noopener" title="Google Scholar">
    <img src="/images/Google_Scholar.png" alt="Google Scholar" class="social-icon">
  </a>
</div>

{{ end }}
