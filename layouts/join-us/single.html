{{ define "main" }}
{{ partial "analytics.html" . }}
{{ partial "hero-banner.html" . }}

<!-- Content from markdown -->
{{ .Content }}

<!-- Back to Top Button -->
<button class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â†‘ Top</button>

<!-- Floating Social Media -->
<div class="social-float-compact">
  <a href="https://www.linkedin.com/in/marc-kenneth-etherington-32aa5876/" target="_blank" rel="noopener" title="LinkedIn">
    <img src="/images/LinkedIn.jpg" alt="LinkedIn" class="social-icon">
  </a>
  <a href="https://bsky.app/profile/mketherington.bsky.social" target="_blank" rel="noopener" title="Bluesky">
    <img src="/images/BlueSky_Logo.png" alt="Bluesky" class="social-icon">
  </a>
  <a href="https://www.researchgate.net/profile/Marc-Etherington?ev=hdr_xprf" target="_blank" rel="noopener" title="ResearchGate">
    <img src="/images/Researchgate.png" alt="ResearchGate" class="social-icon">
  </a>
  <a href="https://scholar.google.co.uk/citations?user=3dgABIQAAAAJ&hl=en" target="_blank" rel="noopener" title="Google Scholar">
    <img src="/images/Google_Scholar.png" alt="Google Scholar" class="social-icon">
  </a>
</div>

<script>
function showTab(tabName) {
  // Hide all tab content
  document.querySelectorAll('.tab-content').forEach(tab => {
    tab.classList.remove('active');
  });
  
  // Remove active from all cards
  document.querySelectorAll('.audience-card').forEach(card => {
    card.classList.remove('active');
  });
  
  // Show selected tab
  const selectedTab = document.getElementById('tab-' + tabName);
  if (selectedTab) {
    selectedTab.classList.add('active');
  }
  
  // Activate selected card
  const selectedCard = document.querySelector('.audience-card.' + tabName);
  if (selectedCard) {
    selectedCard.classList.add('active');
  }
}

// On page load, check if there's a hash and show appropriate tab
window.addEventListener('DOMContentLoaded', function() {
  const hash = window.location.hash;
  
  if (hash) {
    // Find the element with the hash ID
    const targetElement = document.querySelector(hash);
    
    if (targetElement) {
      // Find which tab contains this element
      const parentTab = targetElement.closest('.tab-content');
      
      if (parentTab) {
        // Extract tab name from the parent tab ID (e.g., 'tab-postdoc' -> 'postdoc')
        const tabName = parentTab.id.replace('tab-', '');
        showTab(tabName);
        
        // Small delay to ensure tab is visible before scrolling
        setTimeout(function() {
          targetElement.scrollIntoView({ behavior: 'smooth' });
        }, 100);
      }
    }
  }
});
</script>
{{ end }}
